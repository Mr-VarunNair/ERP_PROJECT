{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="{% static '/css/privilege.css' %}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<style>
    .modal {
        display: none;
        position: fixed;
        z-index: 1;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgb(0,0,0);
        background-color: rgba(0,0,0,0.4);
        padding-top: 60px;
    }

    .modal-content {
        background-color: #fefefe;
        margin: 5% auto;
        padding: 20px;
        border: 1px solid #888;
        width: 80%;
        max-width: 500px;
        text-align: center;
    }

    .close {
        color: #aaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
    }

    .close:hover,
    .close:focus {
        color: black;
        text-decoration: none;
        cursor: pointer;
    }    
        
.switch {
  position: relative;
  display: inline-block;
  width: 30px;
  height: 17px;
}

.switch input { 
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  -webkit-transition: .4s;
  transition: .4s;
}

.slider:before {
  position: absolute;
  content: "";
  height: 13px;
  width: 13px;
  left: 3px;
  bottom: 3px;
  background-color: white;
  -webkit-transition: .4s;
  transition: .4s;
}

input:checked + .slider {
  background-color: #03b123;
}

input:focus + .slider {
  box-shadow: 0 0 1px #03b123;
}

input:checked + .slider:before {
  -webkit-transform: translateX(13px);
  -ms-transform: translateX(13px);
  transform: translateX(13px);
}

/* Rounded sliders */
.slider.round {
  border-radius: 34px;
}

.slider.round:before {
  border-radius: 50%;
}

.btn{
    text-align: center;
    margin: auto;
    width: 60%;
    padding: 10px;
}

.login-button {
    background-color: #2c3e50;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    font-size: 16px;
    cursor: pointer;
    width: 25%;
}

.login-button:hover {
    background-color: #34495e; 
}
</style>
    
</head>
<body>
    {% include 'asset_mng/admin_sidebar.html' %}   
    <div class="right">
        <div class="table-box">
            <h2>ASSET OWNER PRIVILEGE</h2>
            <div class="table-container">
                
                <form method="post" action="{% url 'privilege_asset_owner' %}" id="privilegeForm">
                    {% csrf_token %}
                    <table id="userTable" role="table">
                        <thead>
                            <tr>
                                <th></th>
                                <th>Privilege Update</th>
                                <th>Report Download</th>
                                <th>View</th>
                                <th>Edit</th>
                                <th>Delete</th>
                                <th>Add</th>
                            </tr>
                        </thead>
                        <tbody>
                                <tr>
                                    <td>Assets</td>
                                    <td>
                                
                                    </td>
                                    <td>
                                
                                    </td>
                                    
                                    <td>
                                        
                                    </td>
                                    <td>
                                        
                                    </td>
                                    <td>
                                        
                                    </td>
                                   
                                    <td>
                                        <label class="switch">
                                            <input type="checkbox" name="add_asset" {% if add_asset %}checked{% endif %}>
                                            <span class="slider round"></span>
                                        </label>
                                    </td>
                                </tr>
                        </tbody>
                    </table>
                    <div class="btn">
                        <button type="submit" class="login-button">SAVE</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <p id="modal-message"></p>
        </div>
    </div>

    <script>
        $(document).ready(function(){
            $('#privilegeForm').on('submit', function(e){
                e.preventDefault();  // Prevent the form from submitting the traditional way

                $.ajax({
                    url: $(this).attr('action'),
                    type: 'POST',
                    data: $(this).serialize(),
                    success: function(response){
                        showModal('Changes saved successfully!');
                    },
                    error: function(xhr, errmsg, err) {
                        showModal('An error occurred while saving changes.');
                    }
                });
            });
            var modal = document.getElementById("myModal");
            var span = document.getElementsByClassName("close")[0];
            span.onclick = function() {
                modal.style.display = "none";
            }
            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }

            function showModal(message) {
                document.getElementById("modal-message").textContent = message;
                modal.style.display = "block";
            }
        });
    </script>

    

</body>
</html>    